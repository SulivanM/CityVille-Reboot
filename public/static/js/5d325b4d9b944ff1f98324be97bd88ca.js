var gid="75";var snuidToZidMap={};var zidToSnuidMap={};var onlineFriends={};var getOnlineFriends=function(){return onlineFriends};var initZoom=function(){ZoomAPI.registerOnMessageReceived(gid,function(b){if(b.type==ZoomAPI.MessageType.PRESENCE){switch(b.body){case ZoomAPI.PresenceType.ONLINE:callMethodWithZid(b.zid,"statusChange","online");break;case ZoomAPI.PresenceType.OFFLINE:callMethodWithZid(b.zid,"statusChange","offline");break}}else{if(b.type==ZoomAPI.MessageType.CHAT){var a=(b.msgType=="")&&(b.body==ZoomAPI.PresenceType.OFFLINE);if(!a){callMethodWithZid(b.zid,"onReceiveChat",b.body)}}}})};var callMethodWithZid=function(a,c){var b=new Array();for(i=2;i<arguments.length;i++){b.push(arguments[i])}if(typeof(snuidToZidMap[a])!="undefined"){zid=snuidToZidMap[a];b.unshift(zid);window[c].apply(this,b)}else{a=a.split(":");SNAPI.getZIDs(new Array(a[1]),a[0],function(d){zid=d[a[1]];snuidToZidMap[a[0]+":"+a[1]]=zid;zidToSnuidMap[zid]=a[0]+":"+a[1];b.unshift(zid);window[c].apply(this,b)})}};var statusChange=function(b,a){if(a=="online"){onlineFriends[b]="ol"}else{if(a=="offline"){delete onlineFriends[b]}}var c=document.getElementById("flashapp");if(c&&c.onRTStatusChange&&typeof c.onRTStatusChange=="function"){c.onRTStatusChange(b,a)}};var recordZoomStats=function(a){if(a==undefined){ZStatsCountSample(ZOOM_STATS_SAMPLE_RATE,"zoom","receive","","","","",1)}else{a=a.split(":");if(a[1]%ZOOM_STATS_SAMPLE_RATE==1){ZStatsCount("zoom","send")}}};var onReceiveChat=function(b,a){if((typeof(b)=="undefined")||typeof(a)=="undefined"){return}recordZoomStats();var c=document.getElementById("flashapp");if(c&&c.onRTChat&&typeof c.onRTChat=="function"){c.onRTChat(b,a)}};var broadcastChat=function(a){setTimeout(function(){broadcastChatInternal(a)},1)};var broadcastChatInternal=function(b){for(var a in onlineFriends){sendChat(a,b)}};var sendChat=function(c,b){if(zidToSnuidMap[c]!=undefined){var a=zidToSnuidMap[c];recordZoomStats(a);ZoomAPI._zsend("1 ochat private "+a+" "+ZoomAPI.formatChatMessage(ZoomAPI.MessageType.CHAT,b))}};