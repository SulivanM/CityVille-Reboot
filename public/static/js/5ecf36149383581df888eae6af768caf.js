function ZStatsCount(b,g,f,a,d,c){var e={stats:[{data:[b,g,f,a,d,c,1],statfunction:"count"}],signedParams:ZY.GetAuthParams()};e.signedParams=ZY.GetAuthParams();$.post(STATS_URL,JSON.stringify(e))}function ZStatsCountDtl(i,h,g,f,e,d,c,b,q,p,o,n,m,l,k,j){var a={stats:[{data:[i,h,g,f,e,d,c,b,q,p,o,n,m,l,k,j],statfunction:"count_dtl"}],signedParams:ZY.GetAuthParams()};a.signedParams=ZY.GetAuthParams();$.post(STATS_URL,JSON.stringify(a))}function ZStatsPerf(b,h,g,a,d,c,f){var e={stats:[{data:[b,h,g,a,d,c,f],statfunction:"perf"}],signedParams:ZY.GetAuthParams()};e.signedParams=ZY.GetAuthParams();$.post(STATS_URL,JSON.stringify(e))}function willSampleGetRecorded(a){if(typeof(APP_TEST_MODE)!="undefined"&&APP_TEST_MODE==1){return true}if(snuid%a==1){return true}return false}var ZStatsCountSample=function(e,a,c,g,f,d,i,h){if(willSampleGetRecorded(e)){var b={stats:[{data:[a,c,g,f,d,i,h],statfunction:"count"}],signedParams:ZY.GetAuthParams()};b.signedParams=ZY.GetAuthParams();$.post(STATS_URL,JSON.stringify(b))}};function ZStatsPerfSample(e,c,b,g,f,d,i,h){if(willSampleGetRecorded(e)){var a={stats:[{data:[e,c,b,g,f,d,i,h],statfunction:"perfSample"}],signedParams:ZY.GetAuthParams()};a.signedParams=ZY.GetAuthParams();$.post(STATS_URL,JSON.stringify(a))}}var recordLoadStats=function(f,e,g){try{if(typeof(parent.recordLoadStats)=="function"){parent.recordLoadStats(f,e,g);return}}catch(d){}if(typeof(e)==="undefined"){e=""}if(typeof(g)==="undefined"){g=0}if(willSampleGetRecorded(PERF_SAMPLE_RATE)){var b=new Date();var a=b.getTime();var c=function(){if(e==""){var h=new Date();e=a-h.getTime()}if(typeof(statsSessionStartTime)==="undefined"){statsSessionStartTime="null"}var i={data:[PERF_SAMPLE_RATE,"timing",f,statsSessionStartTime,"","","",e],statfunction:"perfSample"};return i};addToStatsQ(c,g)}};var setStatsSessionStartTime=function(a){statsSessionStartTime=a};function trackShareClick(a){ZStatsCount("hud_clicks","share_banner",(a?1:0))}function trackUncaughtFlashError(c,d){if(c=="securityError"){var a=d.lastIndexOf("cannot load data from ");var e=d;if(a>-1){e=d.substr(a+("cannot load data from ".length))}ZStatsCount("flash_error","uncaught_flash_error",c,e)}else{var b=g_runtimeVars.RATE_UNCAUGHT_ERROR;if(b!=undefined){ZStatsCountSample(b,"flash_error","uncaught_flash_error",c,d)}}}function _pruneUndefined(b){for(var a in b){if(b.hasOwnProperty(a)){if(b[a]===undefined){delete b[a]}}}return b}function dapiTrackCount(a,e,g,f,d,c,b){if(DAPI){DAPI.api.send({method:"ztrack.count",payload:_pruneUndefined({zid:SNAPI.getCurrentUserId(),counter:a,value:e||1,kingdom:g,phylum:f,"class":d,family:c,genus:b})})}}function dapiTrackSocial(h,c,b,d,a,g,f,e){if(DAPI){DAPI.api.send({method:"ztrack.social",payload:_pruneUndefined({zid:SNAPI.getCurrentUserId(),verb:h,target:c,object:b,amount:d||1,location:a,kingdom:g,phylum:f,"class":e})})}}statsQ=[];onEmptyQ=[];if(typeof(stats_batch_size)==="undefined"){stats_batch_size=5}if(typeof(stats_batch_time)==="undefined"){stats_batch_time=5}if(typeof(stats_base_level)==="undefined"){stats_base_level=0}var startStatsTimeout=function(){statsTimeoutId=setTimeout("flushStatsQ('timer')",stats_batch_time*1000)};var stopStatsTimeout=function(){clearTimeout(statsTimeoutId)};var resetStatsTimeout=function(){if(typeof(statsTimeoutId)!=="undefined"){stopStatsTimeout();startStatsTimeout()}};var registerOnEmptyQ=function(a){onEmptyQ.push(a)};var deregisterOnEmptyQ=function(c){for(var b=0,a=onEmptyQ.length;b<a;b++){if(onEmptyQ[b]===c){onEmptyQ.splice(b,1);break}}};var addToStatsQ=function(a,b){statsQ.push({func:a,level:b});if(typeof(b)!=="undefined"&&b==0){flushStatsQ("level")}else{if(statsQ.length>=stats_batch_size){flushStatsQ("size")}}};var flushStatsQ=function(d){if(d=="timer"&&statsQ.length==0){for(var a=0;a<onEmptyQ.length;a++){onEmptyQ[a].call(this)}}if(statsQ.length>0){var c=[];for(var a=0;a<statsQ.length;a++){c.push(statsQ[a].func.call(this))}var b={stats:c,signedParams:ZY.GetAuthParams()};$.post(STATS_URL,JSON.stringify(b));statsQ=[]}resetStatsTimeout()};