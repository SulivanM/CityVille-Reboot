function FarmOverlay(){}FarmOverlay.prototype={overlayOpen:false,openingOverlay:false,deferredAppDisableAllInput:null,showGameOverlay:function(d,f){if(!this.overlayOpen&&!this.openingOverlay){var e=$("#genericOverlay");var a=function(){e.css("margin-left",e.width()*-0.5);e.show();var k="#overlayClose";var j=e.position();var h=j.top;var o=720;var l=e.outerWidth();var n=$(k).width();var g=(l)-n;$(k).css("top",h);$(k).css("left",g);var i=$("#flashapp");var p=function(){return isInteractive&&i&&i.disableAllInput&&typeof i.disableAllInput=="function"};if(p()){i.disableAllInput()}else{if(onInteractiveCallbacks!=null){var m=function(){this.deferredAppDisableAllInput=null;if(p()){i.disableAllInput()}};onInteractiveCallbacks.push(m);this.deferredAppDisableAllInput=m}}if(experiment_wmode){ZYFrameManager.showScreenshot(getImageSrc())}this.overlayOpen=true;this.openingOverlay=false};var b=this;if(d){e.css("margin-top","11px");e.hide();var c=$("#overlayFrame");c.attr("src",d);c.css("width","745px");c.css("height","600px");this.openingOverlay=true;c.load(function(){if(b.openingOverlay){a.call(b)}})}else{a()}}},hideGameOverlay:function(b){if(this.overlayOpen){if(this.deferredAppDisableAllInput!=null){if(onInteractiveCallbacks!=null){var a=onInteractiveCallbacks.indexOf(this.deferredAppDisableAllInput);if(a>=0){onInteractiveCallbacks.splice(a,1)}}this.deferredAppDisableAllInput=null}$("#genericOverlay").hide();var c=$("#flashapp");if(c&&c.enableAllInput&&typeof c.enableAllInput=="function"){c.enableAllInput()}if(experiment_wmode){ZYFrameManager.hideScreenshot()}}this.overlayOpen=false;this.openingOverlay=false},anchorPageToGiftOverlay:function(){scrollParentToGiftOverlay()},showGiftingInterstitialOverlay:function(c,b,a){this.showGameOverlay("gifts_send.php?action=showInOverlay&gift="+c+"&titlePrefix="+b+"&rewardKey="+a+"&"+g_iframeParams)},showGiftingInterstitialOverlayWithRef:function(c,a,b){this.showGameOverlay("gifts_send.php?action=showInOverlay&ref="+b+"&gift="+c+"&titlePrefix="+a+"&"+g_iframeParams)},showInGameGiftingInterstitialOverlay:function(){this.showGameOverlay("gifts_send.php?action=showInOverlay&ref=gameOverlay&titlePrefix=defaultInterstitial&"+g_iframeParams)},showFeedGiftingInterstitialOverlay:function(e,d,b,a,c){this.showGameOverlay("gifts_send.php?action=showInOverlay&ref=FarmFeed_"+c+"&gift="+e+"&titlePrefix="+d+"&giftRecipient="+b+"&recipientName="+escape(a)+"&"+g_iframeParams);this.anchorPageToGiftOverlay()},showFertilizerGiftingInterstitialOverlay:function(c,b,a){this.showGameOverlay("gifts_send.php?action=showInOverlay&ref=fertilizer_thank_you&gift="+c+"&titlePrefix="+b+"&giftRecipient="+a+"&"+g_iframeParams)},showSocialPlumbingGiftRequestOverlay:function(e,c,b,a,d,f){this.showGameOverlay("gifts_send.php?action=showInOverlay&ref="+d+"&gift="+e+"&title="+f+"&giftRecipient="+b+"&recipientName="+escape(a)+"&"+g_iframeParams);this.anchorPageToGiftOverlay()},initializeRecentlyPlayed:function(a){setTimeout(function(){if(loaded&&$("#flashapp")[0]){$("#flashapp")[0].addExternalIdleTask("theFarmOverlay.recentlyPlayedCallback")}},a)},giftSendOverlayCallback:function(a){frameSrc="gifts_send.php?action=giftSendOverlay&view="+a+"&"+g_iframeParams;this.showGameOverlay(frameSrc)},showSurveyOverlay:function(c){if(!c.match(/surveyURL=/)){return}var b=this;var a=function(){b.styleOverlayForSurvey();b.showGameOverlay(c,true)};var d=function(){b.hideGameOverlay(true);b.resetOverlayStyles();$("#overlayFrame").attr("src","")};getOverlayManager().queueOverlay("survey",a,d)},styleOverlayForSurvey:function(){$("#genericOverlay").css("margin-top",60);$("#overlayBorder").removeClass("defaultBorder");$("#overlayFrame").removeClass("defaultFrame").addClass("surveyFrame");$("#overlayClose").hide()},resetOverlayStyles:function(){$("#genericOverlay").css("margin-top",0);$("#overlayBorder").addClass("defaultBorder");$("#overlayFrame").removeClass().addClass("defaultFrame");$("#overlayClose").show()},showFBLikeOverlay:function(e,b,d,c,a){if(!this.overlayOpen){iframeUrl="http://www.facebook.com/plugins/like.php?href="+b+"&amp;ref="+d+"&amp;layout=button_count&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=dark&amp;height=80";if(b){$("#fbLikeCoreFrame").attr("src",iframeUrl)}if(e){$("#like_widget_title").text(e)}else{$("#like_widget_title").text("")}$("#fb_close_btn").val(c);$("#fb_visit_btn").val(a);$("#fbLikeOverlay").show();$("#flashapp")[0].disableAllInput();if(experiment_wmode){ZYFrameManager.showScreenshot(getImageSrc())}this.overlayOpen=true}$("#fb_visit_btn").bind("click",{scope:this,likeUrl:b,reference:d},this.launchFBLikeUrl);$("#fb_close_btn").bind("click",{scope:this,element:$("#fbLikeCoreFrame"),fbCloseBtn:$("#fb_close_btn"),fbVisitBtn:$("#fb_visit_btn"),fbCloseIcon:$("#dialog_close_icon")},this.hideFBLikeOverlay);$("#dialog_close_icon").bind("click",{scope:this,element:$("#fbLikeCoreFrame"),fbCloseBtn:$("#fb_close_btn"),fbVisitBtn:$("#fb_visit_btn"),fbCloseIcon:$("#dialog_close_icon")},this.hideFBLikeOverlay)},hideFBLikeOverlay:function(b,a){if($("#fbLikeOverlay").css("display")!="none"){$("#fbLikeOverlay").hide();if($("#flashapp")&&$("#flashapp")[0]&&$("#flashapp")[0].enableAllInput){$("#flashapp")[0].enableAllInput()}if(experiment_wmode){ZYFrameManager.hideScreenshot()}}b.data.scope.overlayOpen=false;b.data.scope.resetOverlayStyles();b.data.element.attr("src","");b.data.fbCloseBtn.unbind();b.data.fbVisitBtn.unbind();b.data.fbCloseIcon.unbind()},launchFBLikeUrl:function(b,a){ZStatsCountSample(100,"game_actions","fb_like_button","visit_click",b.data.reference,"","",1);window.open(b.data.likeUrl)}};